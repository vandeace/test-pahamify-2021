"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./deattribute.js");require("./error.js");var i=require("./filterIncludes.js");function t({id:t,type:s,meta:n},r){const a=i.filterIncludes(r,{id:t,type:s});return a.relationships&&l(a,r),n&&(a.meta=n),e.deattribute(a)}function s(e,i,s){e[s]={},e.relationships[s].links&&(e[s].links=e.relationships[s].links),e[s].data=[];for(const n of e.relationships[s].data)e[s].data.push(t(n,i));delete e.relationships[s]}function n(e,i,s){e[s]={},e[s].data=t(e.relationships[s].data,i),e.relationships[s].links&&(e[s].links=e.relationships[s].links),delete e.relationships[s]}function r(e,i){e[i]={},e.relationships[i].links&&(e[i].links=e.relationships[i].links),delete e.relationships[i]}function l(e,i=[]){const{relationships:t}=e;for(const a in t){var l;Array.isArray(null===(l=t[a])||void 0===l?void 0:l.data)?s(e,i,a):t[a].data?n(e,i,a):r(e,a)}return 0===Object.keys(t||[]).length&&(null==t?void 0:t.constructor)===Object&&delete e.relationships,e}exports.linkRelationships=l;
